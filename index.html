<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>F5 Multi-Day Tracker</title>
    <style>
        :root { --neon: #00ffcc; --gold: #ffcc00; --faded: #333; }
        body { font-family: sans-serif; background: #050505; color: white; padding: 15px; }
        .card { background: #111; padding: 20px; border-radius: 20px; border: 1px solid #222; max-width: 450px; margin: auto; }
        .stat-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 20px; }
        .stat-box { background: #1a1a1a; padding: 10px; border-radius: 10px; text-align: center; border: 1px solid #333; }
        
        input, select { background: #1a1a1a; border: 1px solid #333; color: white; padding: 12px; border-radius: 10px; width: 100%; box-sizing: border-box; margin-bottom: 10px; font-size: 16px; }
        button { background: var(--neon); color: black; border: none; padding: 15px; border-radius: 12px; font-weight: 800; width: 100%; cursor: pointer; }
        
        .ticket-item { background: #161616; padding: 15px; border-radius: 12px; margin-top: 10px; border-left: 5px solid var(--faded); position: relative; }
        .active-ticket { border-left-color: var(--neon); }
        .expired-ticket { opacity: 0.5; border-left-color: #ff4444; }
        .days-left { position: absolute; right: 15px; top: 15px; font-size: 10px; background: #222; padding: 3px 7px; border-radius: 5px; color: var(--neon); }
    </style>
</head>
<body>

<div class="card">
    <h2 style="color:var(--neon); margin-top:0;">VAULT 2.0</h2>
    
    <div class="stat-grid">
        <div class="stat-box"><small>SPENT</small><br><strong id="totalSpend">$0</strong></div>
        <div class="stat-box"><small>WON</small><br><strong id="totalWins" style="color:var(--gold)">$0</strong></div>
    </div>

    <p style="font-size:11px; color:#666;">STEP 1: ENTER TONIGHT'S WINNERS</p>
    <input type="text" id="winInput" placeholder="Ex: 12 16 21 29 39" oninput="checkWins()">

    <p style="font-size:11px; color:#666;">STEP 2: LOG NEW PURCHASE</p>
    <input type="text" id="ticketInput" placeholder="Enter Your Numbers">
    
    <label style="font-size:11px; color:#666;">HOW MANY DAYS (1-10)?</label>
    <select id="daysInput">
        <option value="1">1 Day (Single Draw)</option>
        <option value="2">2 Days</option>
        <option value="3">3 Days</option>
        <option value="5">5 Days</option>
        <option value="10">10 Days (Full Run)</option>
    </select>
    
    <button onclick="addTicket()">SAVE TO VAULT</button>
</div>

<div id="vaultList" style="max-width:450px; margin: 20px auto;"></div>

<script>
    let tickets = JSON.parse(localStorage.getItem('f5_vault_v2') || "[]");
    let stats = JSON.parse(localStorage.getItem('f5_stats') || '{"spent":0, "won":0}');

    function addTicket() {
        const nums = document.getElementById('ticketInput').value.trim();
        const days = parseInt(document.getElementById('daysInput').value);
        if(!nums) return;

        const newTicket = {
            nums: nums,
            startDay: new Date().getTime(),
            duration: days,
            cost: days * 1, // Assumes $1 per day
            wins: 0
        };

        tickets.push(newTicket);
        stats.spent += newTicket.cost;
        saveData();
        render();
    }

    function checkWins() {
        render();
    }

    function render() {
        const winNums = document.getElementById('winInput').value.split(/\s+/).map(Number);
        const list = document.getElementById('vaultList');
        const now = new Date().getTime();
        list.innerHTML = '';

        tickets.forEach((t, i) => {
            // Calculate if ticket is still active (86400000 ms per day)
            const msPassed = now - t.startDay;
            const daysPassed = Math.floor(msPassed / 86400000);
            const daysRemaining = t.duration - daysPassed;
            const isExpired = daysRemaining <= 0;

            const myNums = t.nums.split(/\s+/).map(Number);
            let matches = myNums.filter(n => winNums.includes(n) && winNums[0] !== 0).length;

            list.innerHTML += `
                <div class="ticket-item ${isExpired ? 'expired-ticket' : 'active-ticket'}">
                    <span class="days-left">${isExpired ? 'EXPIRED' : daysRemaining + ' DAYS LEFT'}</span>
                    <div style="font-size:18px; font-weight:bold; letter-spacing:1px;">${t.nums}</div>
                    <div style="font-size:11px; color:#888; margin-top:5px;">
                        Matches: <span style="color:var(--neon)">${matches}</span> | 
                        Total Won: <span style="color:var(--gold)">$${t.wins}</span>
                    </div>
                    ${!isExpired ? `<button onclick="logWin(${i})" style="width:auto; padding:5px 10px; font-size:10px; margin-top:10px; background:var(--gold)">LOG PAYOUT</button>` : ''}
                </div>`;
        });

        document.getElementById('totalSpend').innerText = `$${stats.spent}`;
        document.getElementById('totalWins').innerText = `$${stats.won}`;
    }

    function logWin(i) {
        let amt = prompt("Enter winnings for this ticket:");
        if(amt) {
            stats.won += parseInt(amt);
            tickets[i].wins += parseInt(amt);
            saveData();
            render();
        }
    }

    function saveData() {
        localStorage.setItem('f5_vault_v2', JSON.stringify(tickets));
        localStorage.setItem('f5_stats', JSON.stringify(stats));
    }

    window.onload = render;
</script>
</body>
</html>
