<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>F5 Tracker 2.1</title>
    <style>
        :root { --neon: #00ffcc; --gold: #ffcc00; --bg: #0a0a0a; }
        body { font-family: sans-serif; background: var(--bg); color: white; padding: 15px; }
        .card { background: #111; padding: 20px; border-radius: 20px; border: 1px solid #222; max-width: 450px; margin: auto; }
        .stats { display: flex; gap: 10px; margin-bottom: 20px; }
        .stat-box { flex: 1; background: #1a1a1a; padding: 15px; border-radius: 15px; text-align: center; border: 1px solid #333; }
        input, select { background: #1a1a1a; border: 1px solid #333; color: white; padding: 14px; border-radius: 12px; width: 100%; box-sizing: border-box; margin-bottom: 12px; font-size: 16px; }
        button { background: var(--neon); color: black; border: none; padding: 16px; border-radius: 14px; font-weight: 800; width: 100%; cursor: pointer; }
        .ticket { background: #161616; padding: 15px; border-radius: 12px; margin-top: 10px; border-left: 4px solid #333; position: relative; }
        .match-win { border-left-color: var(--neon); background: #00221a; }
        .match-num { color: var(--neon); font-weight: bold; text-decoration: underline; }
        .log-win-btn { background: var(--gold); padding: 5px 10px; border-radius: 5px; font-size: 10px; border: none; font-weight: bold; margin-top: 8px; cursor: pointer; }
    </style>
</head>
<body>

<div class="card">
    <div class="stats">
        <div class="stat-box"><small>SPENT</small><br><span id="spentDisplay" style="font-size:20px; font-weight:900;">$0</span></div>
        <div class="stat-box"><small>WON</small><br><span id="wonDisplay" style="font-size:20px; font-weight:900; color:var(--gold);">$0</span></div>
    </div>

    <input type="text" id="winDraw" placeholder="Tonight's Winning #s" oninput="render()">
    <input type="text" id="newTicket" placeholder="Enter Your Numbers">
    
    <select id="duration">
        <option value="1">1 Day</option>
        <option value="3">3 Days</option>
        <option value="5">5 Days</option>
        <option value="10">10 Days</option>
    </select>
    
    <button onclick="saveTicket()">SAVE TO PERSISTENT MEMORY</button>
</div>

<div id="list" style="max-width:450px; margin: 20px auto;"></div>

<script>
    let vault = JSON.parse(localStorage.getItem('f5_v21_vault') || "[]");
    let stats = JSON.parse(localStorage.getItem('f5_v21_stats') || '{"spent":0, "won":0}');

    function saveTicket() {
        const nums = document.getElementById('newTicket').value.trim();
        const days = parseInt(document.getElementById('duration').value);
        if(!nums) return;

        vault.push({
            nums: nums,
            added: new Date().getTime(),
            days: days,
            paid: days,
            payout: 0
        });

        stats.spent += days;
        localStorage.setItem('f5_v21_vault', JSON.stringify(vault));
        localStorage.setItem('f5_v21_stats', JSON.stringify(stats));
        
        document.getElementById('newTicket').value = ''; // Clear input!
        render();
    }

    function render() {
        const winning = document.getElementById('winDraw').value.split(/\s+/).map(Number);
        const listDiv = document.getElementById('list');
        listDiv.innerHTML = '';

        vault.forEach((t, i) => {
            const myNums = t.nums.split(/\s+/).map(Number);
            let matchCount = 0;
            
            // Build the number display with highlighting
            let numHTML = myNums.map(n => {
                const isMatch = winning.includes(n) && winning[0] !== 0;
                if(isMatch) matchCount++;
                return `<span class="${isMatch ? 'match-num' : ''}">${n < 10 ? '0'+n : n}</span>`;
            }).join(' ');

            listDiv.innerHTML += `
                <div class="ticket ${matchCount >= 2 ? 'match-win' : ''}">
                    <div style="font-size:18px;">${numHTML}</div>
                    <div style="font-size:10px; color:#666; margin-top:5px;">Matches: ${matchCount} | Total Won: $${t.payout}</div>
                    <button class="log-win-btn" onclick="addWin(${i})">LOG WINNINGS</button>
                    <span style="float:right; color:#444;" onclick="del(${i})">Ã—</span>
                </div>`;
        });

        document.getElementById('spentDisplay').innerText = `$${stats.spent}`;
        document.getElementById('wonDisplay').innerText = `$${stats.won}`;
    }

    function addWin(i) {
        let win = prompt("How much did this ticket pay out?");
        if(win) {
            stats.won += parseInt(win);
            vault[i].payout += parseInt(win);
            localStorage.setItem('f5_v21_vault', JSON.stringify(vault));
            localStorage.setItem('f5_v21_stats', JSON.stringify(stats));
            render();
        }
    }

    function del(i) {
        if(confirm("Remove ticket?")) {
            vault.splice(i,1);
            localStorage.setItem('f5_v21_vault', JSON.stringify(vault));
            render();
        }
    }

    window.onload = render;
</script>
</body>
</html>
